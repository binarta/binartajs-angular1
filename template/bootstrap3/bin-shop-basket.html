<div class="bin-shop">
    <div class="container" ng-if="$ctrl.mode == 'summary'">
        <div class="row">
            <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-lg-8 col-lg-offset-2">
                <div class="panel panel-default">
                    <div class="panel-heading" i18n code="shop.basket.panel.title" read-only>
                        <i class="fa fa-shopping-cart fa-fw"></i> {{::var}}
                    </div>
                    <div class="panel-body">
                        <div class="row" ng-repeat="item in ::$ctrl.preview.items track by item.id">
                            <div class="col-xs-8" i18n code="{{::item.id}}" read-only>
                                {{::var}} ({{::item.quantity}})
                            </div>
                            <div class="col-xs-4 text-right" ng-bind="::item.presentableSubTotal"></div>
                            <div class="col-xs-12">
                                <hr>
                            </div>
                        </div>

                        <div class="bin-basket-prices text-right">
                            <div class="row">
                                <div class="col-xs-8 col-sm-10" i18n code="shop.prices.subtotal.label" read-only>
                                    <strong>{{::var}}</strong>
                                </div>
                                <div class="col-xs-4 col-sm-2" ng-bind="::$ctrl.preview.presentableItemTotal"></div>
                            </div>
                            <div class="row" ng-repeat="item in $ctrl.preview.additionalCharges">
                                <div class="col-xs-8 col-sm-10"
                                     i18n code="shop.prices.{{::item.label}}.label" default="{{::item.label}}"
                                     read-only>
                                    <strong>{{::var}}</strong>
                                </div>
                                <div class="col-xs-4 col-sm-2" ng-bind="::item.presentableValue"></div>
                            </div>
                            <div class="row">
                                <div class="col-xs-8 col-sm-10" i18n code="shop.prices.total.label" read-only>
                                    <strong>{{::var}}</strong>
                                </div>
                                <div class="col-xs-4 col-sm-2">
                                    <div class="basket-total-price" ng-bind="::$ctrl.preview.presentablePrice"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container" ng-if="$ctrl.mode != 'summary'">
        <div class="row" ng-if="$ctrl.preview.items.length > 0">
            <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-lg-8 col-lg-offset-2">
                <div class="bin-basket-items" ng-if="$ctrl.viewport.visibleXs()">
                    <div class="row" ng-repeat="item in $ctrl.preview.items track by item.id">
                        <div class="col-xs-12">
                            <ng-include src="'bin-shop-basket-list-item-default.html'"></ng-include>
                        </div>
                    </div>
                </div>

                <div class="bin-basket-items" ng-if="$ctrl.viewport.visibleSm()">
                    <div bin-split-in-rows="$ctrl.preview.items" columns="3">
                        <div class="row" ng-repeat="row in rows track by row.id">
                            <div class="col-sm-4" ng-repeat="item in row.items track by item.id">
                                <ng-include src="'bin-shop-basket-list-item-default.html'"></ng-include>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bin-basket-items" ng-if="$ctrl.viewport.visibleMd() || $ctrl.viewport.visibleLg()">
                    <div bin-split-in-rows="$ctrl.preview.items" columns="4">
                        <div class="row" ng-repeat="row in rows track by row.id">
                            <div class="col-md-3" ng-repeat="item in row.items track by item.id">
                                <ng-include src="'bin-shop-basket-list-item-default.html'"></ng-include>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bin-basket-prices text-right">
                    <div ng-if="updatingPrices">
                        <div class="row">
                            <div class="col-xs-8 col-sm-10" i18n code="shop.prices.subtotal.label" read-only>
                                <strong>{{::var}}</strong>
                            </div>
                            <div class="col-xs-4 col-sm-2">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                        <div class="row" ng-repeat="item in $ctrl.preview.additionalCharges">
                            <div class="col-xs-8 col-sm-10" i18n code="shop.prices.{{::item.label}}.label" read-only>
                                <strong>{{::var}}</strong>
                            </div>
                            <div class="col-xs-4 col-sm-2">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-8 col-sm-10" i18n code="shop.prices.total.label" read-only>
                                <strong>{{::var}}</strong>
                            </div>
                            <div class="col-xs-4 col-sm-2">
                                <div class="basket-total-price">
                                    <i class="fa fa-spinner fa-spin"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div ng-if="!updatingPrices">
                        <div class="row">
                            <div class="col-xs-8 col-sm-10" i18n code="shop.prices.subtotal.label" read-only>
                                <strong>{{::var}}</strong>
                            </div>
                            <div class="col-xs-4 col-sm-2">
                                {{$ctrl.presentableItemTotal}}
                            </div>
                        </div>
                        <div class="row" ng-repeat="item in $ctrl.preview.additionalCharges">
                            <div class="col-xs-8 col-sm-10"
                                 i18n code="shop.prices.{{::item.label}}.label" default="{{::item.label}}" read-only>
                                <strong>{{::var}}</strong>
                            </div>
                            <div class="col-xs-4 col-sm-2">
                                {{item.presentableValue}}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-8 col-sm-10" i18n code="shop.prices.total.label" read-only>
                                <strong>{{::var}}</strong>
                            </div>
                            <div class="col-xs-4 col-sm-2">
                                <div class="basket-total-price">
                                    {{$ctrl.preview.presentablePrice}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-12">
                        <hr>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>